(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/func/assetimport"],{"291c":function(t,e,n){"use strict";n.r(e);var a=n("e5f2"),o=n("96c4");for(var s in o)"default"!==s&&function(t){n.d(e,t,(function(){return o[t]}))}(s);var c,i=n("f0c5"),l=Object(i["a"])(o["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],c);e["default"]=l.exports},"33de":function(t,e,n){"use strict";(function(t){n("9f33"),n("921b");a(n("66fd"));var e=a(n("291c"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"96c4":function(t,e,n){"use strict";n.r(e);var a=n("c3ed"),o=n.n(a);for(var s in a)"default"!==s&&function(t){n.d(e,t,(function(){return a[t]}))}(s);e["default"]=o.a},c3ed:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=function(){n.e("components/crop").then(function(){return resolve(n("dc91"))}.bind(null,n)).catch(n.oe)},o={data:function(){return{assetInfo:null,category:null,local:null,cate_index:0,local_index:0,requestUrl:null,photoSrc:""}},onLoad:function(t){getApp().sendSocket("getAssetInfo",{no:t.no}),getApp().sendSocket("getCategory"),getApp().sendSocket("getLocal"),this.requestUrl=getApp().globalData.requestUrl},onShow:function(){var e=this;t.onSocketMessage((function(t){e.getMessage(JSON.parse(t.data))}))},components:{crop:a},methods:{getMessage:function(e){t.hideLoading();var n=e.msg,a=e.obj;"loginError"==n?(getApp().delCode(),t.redirectTo({url:"/pages/mine/mine"})):"assetInfo"==n?(this.assetInfo=a,this.setLocalIndex(),this.setCateIndex()):"category"==n?(this.category=a,this.setCateIndex()):"local"==n?(this.local=a,this.setLocalIndex()):"assetImportSuccess"==n&&t.showToast({icon:"success",title:"保存成功"})},setValue:function(t){var e=t.currentTarget.dataset.value;this.assetInfo[e]=t.detail.value},DelImg:function(t){this.assetInfo.as_image=""},makeImage:function(e){var n=this;t.chooseImage({count:1,sizeType:["compressed"],sourceType:"camera",success:function(t){var e=t.tempFilePaths[0];n.photoSrc=e,n.$refs.crop.isShow=!0}})},setCate:function(t){var e=t.detail.value;this.cate_index=e,this.assetInfo.cate_id=this.category[e].cate_id},setLocal:function(t){var e=t.detail.value;this.local_index=e,this.assetInfo.as_local_id=this.local[e].local_id},setLocalIndex:function(){if(this.assetInfo&&this.local)for(var t in this.local)if(this.local[t].local_id==this.assetInfo.as_local_id){this.local_index=t;break}},setCateIndex:function(){if(this.assetInfo&&this.category)for(var t in this.category)if(this.category[t].cate_id==this.assetInfo.cate_id){this.cate_index=t;break}},save:function(){getApp().sendSocket("assetImport",this.assetInfo)},uploadF:function(t){var e=this;getApp().uploadF(t,(function(t){e.assetInfo.as_image=t.data}))}}};e.default=o}).call(this,n("543d")["default"])},e5f2:function(t,e,n){"use strict";var a,o=function(){var t=this,e=t.$createElement;t._self._c},s=[];n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return a}))}},[["33de","common/runtime","common/vendor"]]]);